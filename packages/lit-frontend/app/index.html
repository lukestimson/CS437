<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/styles/reset.css"/>
    <link rel="stylesheet" href="/styles/tokens.css"/>
    <link rel="stylesheet" href="/styles/page.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Kanit&display=swap">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit&family=PT+Serif:ital,wght@0,700;1,400&display=swap" rel="stylesheet">

    <script>var exports = {};</script>

    <script type="module" src="/components/destination-card.ts"></script>
    <script type="module" src="/components/right-side-content.ts"></script>
    <script type="module" src="/components/drop-down.ts"></script>
    <script type="module" src="/components/user-panel.ts"></script>


    <title>Travel Destinations</title>
</head>
<body>
    <header class="header">
        <div class=logo> <img src="/logo.png" alt="Logo"></div>
        <h1 class="title">Travel Destinations</h1>

        <drop-down align="right">
            <user-panel>

            </user-panel>
        </drop-down>

    </header>

    <!-- Search Filter -->
    <h2>
        <!-- Search Filter -->
        <span>&nbsp;&nbsp;&nbsp;</span> <input type="text" id="searchBox" placeholder="Filter destinations">
        <!-- Sliding Bar Filter -->
        <label for="costRange">Travel Budget:</label>
        <input type="range" id="costRange" min="0" max="5000" value="5000">
        <p id="costValue">$5000</p>
        <p>&nbsp;</p>

    </h2>
    <div class="main-container">
        <div class="destination-cards">
            <!-- Destination cards here -->
            <destination-card
                    title="Faroe Islands"
                    cost="$2400"
                    type="Remote"
                    season="June-August"
                    activities="Hiking, Bird Watching"
                    imageUrl="/images/faroe-islands.jpg">
            </destination-card>

            <destination-card
                    title="Arenal, Costa Rica"
                    cost="$1200"
                    type="Tropical"
                    season="March - September"
                    activities="hiking, hot springs"
                    imageUrl="/images/costa-rica.jpg">
            </destination-card>

            <destination-card
                    title="Playa Hermosa, Costa Rica"
                    cost="$1100"
                    type="Tropical, Coastal"
                    season="March - September"
                    activities="Surfing, relaxing"
                    imageUrl="/images/Playahermosa-costaRica.jpg">
            </destination-card>

            <destination-card
                    title="Madeira, Portugal"
                    cost="$1800"
                    type="Remote, Dramatic"
                    season="May-July"
                    activities="hiking, off-roading"
                    imageUrl="/images/madeira-portugal.jpeg">
            </destination-card>

            <destination-card
                    title="Lisbon, Portugal"
                    cost="$1200"
                    type="City, Historic, San Francisco-like"
                    season="May-July"
                    activities="Riding Trams, Eating"
                    imageUrl="/images/lisbon-portugal.jpg">
            </destination-card>

            <destination-card
                    title="Grindelwald, Switzerland"
                    cost="$3000"
                    type="Mountainous, historic"
                    season="July, February"
                    activities="train rides, cold-plunging"
                    imageUrl="/images/Grindelwald.jpg">
            </destination-card>

            <destination-card
                    title="Big Sur, California"
                    cost="$100"
                    type="coastal cliffs, historic beauty"
                    season="March, October"
                    activities="Drive Highway 1, tent camp"
                    imageUrl="/images/big-sur-california.jpg">
            </destination-card>
        </div>

        <div class="right-side-content">
            <right-side-content></right-side-content>
        </div>
    </div>


    <!-- Added javascript for Price range filtering -->
    <script>
        const searchBox = document.getElementById('searchBox');
        const costRange = document.getElementById('costRange');
        const destinationCards = document.querySelectorAll('destination-card');

        // Function to filter destinations based on search query and cost range
        function filterDestinations() {
            const searchTerm = searchBox.value.toLowerCase();
            const minCost = parseInt(costRange.value, 10);

            // Filter destination cards based on search query and cost range
            destinationCards.forEach(card => {
                const cardTitle = card.getAttribute('title').toLowerCase();
                const cardCost = parseInt(card.getAttribute('cost').replace('$', ''), 10);
                const cardVisible = cardTitle.includes(searchTerm) && cardCost <= minCost;
                card.style.display = cardVisible ? 'block' : 'none';
            });
        }

        // Event listeners for search box and cost range     //
        searchBox.addEventListener('input', filterDestinations);
        costRange.addEventListener('input', filterDestinations);

        const costValue = document.getElementById('costValue');

        // Function to update the cost value display
        function updateCostValue() {
            const currentValue = costRange.value;
            costValue.textContent = `$${currentValue}`; // Update the text content with the current value
}

        // Function to update the position of the costValue element based on the slider position
        function updateCostValuePosition() {
            const sliderWidth = costRange.offsetWidth;       // Get the width of the slider

            const sliderValue = parseFloat(costRange.value);  // Get the value of the slider
            
            const position = (sliderValue / 5000) * sliderWidth;   // Calculate the position of the cost value relative to the slider position

            costValue.style.left = `${position}px`;      // Set the left position of the costValue element
        }

        // Update the cost value display/ position when the slider value changes
        costRange.addEventListener('input', updateCostValue);
        costRange.addEventListener('input', updateCostValuePosition);

        updateCostValuePosition();  // Call the function initially to set the initial position

    </script>


</body>
</html>
